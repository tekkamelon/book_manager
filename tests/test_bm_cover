# bm_cover テスト項目

## 1. 基本機能テスト

### 1.1 有効なISBNでopenBDから書影を取得
- 正しいISBN番号を指定した場合、書影URLが返ってくること
- 例: `bm_cover 9784839961451`

### 1.2 有効なISBNでGoogle Booksから書影を取得
- 正しいISBN番号を指定した場合、書影URLが返ってくること
- 例: `bm_cover -g 9784839961451`

### 1.3 標準入力からISBNを読み込む
- 標準入力からISBNをパイプで渡した場合、書影URLが返ってくること
- 例: `echo 9784839961451 | bm_cover`

### 1.4 コマンドライン引数からISBNを読み込む
- コマンドライン引数としてISBNを指定した場合、書影URLが返ってくること

## 2. フォールバック機能テスト

### 2.1 openBDから結果なしの場合、Google Booksへフォールバック
- openBDで書影が見つからないISBNを指定し、`-f`オプションを有効にした場合、Google Booksから検索されること

### 2.2 Google Booksから結果なしの場合、openBDへフォールバック
- Google Booksで書影が見つからないISBNを指定し、`-f`オプションを有効にした場合、openBDから検索されること

### 2.3 フォールバック無効時の挙動
- `-f`オプションを指定しない場合、APIで書影が見つからない時点でエラーが返ること

## 3. エラーハンドリングテスト

### 3.1 ISBNが提供されない場合
- ISBNを指定せずに実行した場合、適切なエラーメッセージが表示されること

### 3.2 不明なオプションを指定した場合
- 存在しないオプションを指定した場合、適切なエラーメッセージが表示されること
- 例: `bm_cover -x 9784839961451`

### 3.3 複数のISBNを指定した場合
- 複数のISBNを指定した場合、適切なエラーメッセージが表示されること
- 例: `bm_cover 9784839961451 9784839961452`

### 3.4 無効なISBNを指定した場合
- 存在しないISBN番号を指定した場合、適切なエラーメッセージが表示されること

### 3.5 APIリクエスト失敗時
- ネットワーク接続がない場合、APIからデータを取得できない場合、適切なエラーメッセージが表示されること

## 4. オプションテスト

### 4.1 ヘルプ表示（-hオプション）
- `-h`オプションを指定した場合、使用方法が正しく表示されること

### 4.2 openBD API選択（-oオプション）
- `-o`オプションを指定した場合、openBD APIが使用されること

### 4.3 Google Books API選択（-gオプション）
- `-g`オプションを指定した場合、Google Books APIが使用されること

### 4.4 フォールバック有効（-fオプション）
- `-f`オプションを指定した場合、フォールバック機能が有効になること

### 4.5 オプションの組み合わせ
- 複数のオプションを組み合わせた場合に正しく動作すること
- 例: `bm_cover -o -f 9784839961451`

## 5. ダウンローダ依存テスト

### 5.1 wget優先時の動作
- wgetとcurlの両方がインストールされている場合、wgetが優先されること

## 6. 出力形式テスト

### 6.1 正常時の出力形式
- 書影が見つかった場合、URLのみが標準出力に出力されること

### 6.2 エラー時の出力形式
- エラーが発生した場合、エラーメッセージが標準エラー出力に出力されること

### 6.3 終了コード
- 正常終了時: 終了コード0
- エラー終了時: 終了コード1

## 7. 境界値テスト

### 7.1 ISBNの文字数
- ISBN-13形式（13桁）で正しく動作すること

### 7.2 特殊なISBN
- 空文字列の動作を確認すること

