# add.cgi 書影表示機能テスト項目

## テスト概要
`cgi-bin/add.cgi`に`bm_cover`を組み込み、ISBN入力時に書籍情報と共に書影画像を表示できることを確認する。

## テスト環境
- URL: http://localhost/html/add.html
- テストツール: Playwright MCP

## テストデータ
- ISBN-1: `9784757506206`
- ISBN-2: `9784274064067`

---

## テスト項目

### TC-001: 追加ページへの遷移確認
**目的**: 書籍追加ページが正常に表示されることを確認する

**手順**:
1. http://localhost/html/add.html にアクセスする

**期待結果**:
- ページタイトル「書籍追加 - Book Manager」が表示される
- ISBN入力フォームが表示される
- 「追加」ボタンが表示される

---

### TC-002: ISBN入力による書籍情報と書影表示（9784757506206）
**目的**: ISBNを入力した際に書籍情報と書影画像が表示されることを確認する

**手順**:
1. http://localhost/html/add.html にアクセスする
2. ISBN入力欄に `9784757506206` を入力する
3. 「追加」ボタンをクリックする

**期待結果**:
- 「書籍追加結果」ページが表示される
- 書籍情報（タイトル、著者など）がテーブル形式で表示される
- 書影画像が表示される（`<div class="cover-image">`内に`<img>`タグが存在）
- 画像URLが取得できていれば画像が表示される

---

### TC-003: ISBN入力による書籍情報と書影表示（9784274064067）
**目的**: 別のISBNでも書籍情報と書影画像が表示されることを確認する

**手順**:
1. http://localhost/html/add.html にアクセスする
2. ISBN入力欄に `9784274064067` を入力する
3. 「追加」ボタンをクリックする

**期待結果**:
- 「書籍追加結果」ページが表示される
- 書籍情報（タイトル、著者など）がテーブル形式で表示される
- 書影画像が表示される（`<div class="cover-image">`内に`<img>`タグが存在）
- 画像URLが取得できていれば画像が表示される

---

### TC-004: 画像取得失敗時の動作確認
**目的**: 書影画像が取得できない場合でもエラーメッセージが表示されず、正常に処理が完了することを確認する

**前提条件**:
- 存在しないISBNまたは書影が登録されていないISBNを使用

**手順**:
1. http://localhost/html/add.html にアクセスする
2. ISBN入力欄に書影が存在しないISBNを入力する（例: 9999999999999）
3. 「追加」ボタンをクリックする

**期待結果**:
- 「書籍追加結果」ページが表示される
- 書籍情報が取得できればテーブル形式で表示される
- 書影画像は表示されない（`<div class="cover-image">`が存在しない、または空）
- エラーメッセージは表示されない
- ページ全体が正常にレンダリングされる

---

## テスト実行手順

```bash
# テスト実行前にサーバが起動していることを確認
curl -s http://localhost/html/add.html | head -20

# Playwright MCPを使用してテスト実行
# 1. TC-001: ページ遷移確認
# 2. TC-002: ISBN 9784757506206 でテスト
# 3. TC-003: ISBN 9784274064067 でテスト
# 4. TC-004: 画像取得失敗時の動作確認（オプション）
```

## 備考
- 書影画像の取得は`bm_cover`コマンドを使用
- 画像URLが取得できない場合でも、エラーメッセージは表示しない設計
- 画像表示には`<div class="cover-image">`と`<img>`タグを使用
- 画像サイズは最大幅200px、最大高さ300pxに制限
